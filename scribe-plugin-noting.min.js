!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scribePluginNoting=e()}}(function(){return function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return r(n?n:e)},f,f.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(){},{}],2:[function(e,t){function n(e,t){return t=t||null,1==e.nodeType?r(e,t):3==e.nodeType?o(e,t):void 0}function o(e){return new a(e.nodeValue)}function r(e){for(var t=e.tagName,o="http://www.w3.org/1999/xhtml"==e.namespaceURI?null:e.namespaceURI,r=i(e),a=[],u=0;u<e.childNodes.length;u++)a.push(n(e.childNodes[u]));return new s(t,r,a,null,o)}function i(e){var t={};return u.forEach(function(n){if(e[n]){if("style"==n){for(var o,r={},i=0;i<e.style;i++)o=e.style[i],r[o]=e.style.getPropertyValue(o);return void(t[n]=r)}if("dataset"==n){var s={};for(var a in e.dataset)s[a]=e.dataset[a];return void(t[n]=s)}"attributes"!=n&&(t[n]=e[n])}}),t}var s=e("vtree/vnode"),a=e("vtree/vtext");t.exports=n,n.fromHTML=function(e,t){var o=document.createElement("div");return o.innerHTML=e,o=o.children[0]||o,n(o,t)};{var u=t.exports.properties=["accept","accessKey","action","alt","async","autoComplete","autoPlay","cellPadding","cellSpacing","checked","className","colSpan","content","contentEditable","controls","crossOrigin","data","dataset","defer","dir","download","draggable","encType","formNoValidate","href","hrefLang","htmlFor","httpEquiv","icon","id","label","lang","list","loop","max","mediaGroup","method","min","multiple","muted","name","noValidate","pattern","placeholder","poster","preload","radioGroup","readOnly","rel","required","rowSpan","sandbox","scope","scrollLeft","scrolling","scrollTop","selected","span","spellCheck","src","srcDoc","srcSet","start","step","style","tabIndex","target","title","type","value","autoCapitalize","autoCorrect","property","attributes"];t.exports.attrs=["allowFullScreen","allowTransparency","charSet","cols","contextMenu","dateTime","disabled","form","frameBorder","height","hidden","maxLength","role","rows","seamless","size","width","wmode","cx","cy","d","dx","dy","fill","fx","fy","gradientTransform","gradientUnits","offset","points","r","rx","ry","spreadMethod","stopColor","stopOpacity","stroke","strokeLinecap","strokeWidth","textAnchor","transform","version","viewBox","x1","x2","x","y1","y2","y"]}},{"vtree/vnode":7,"vtree/vtext":8}],3:[function(e,t){function n(e){return e&&"function"==typeof e.hook&&!e.hasOwnProperty("hook")}t.exports=n},{}],4:[function(e,t){function n(e){return e&&"VirtualNode"===e.type&&e.version===o}var o=e("./version");t.exports=n},{"./version":6}],5:[function(e,t){function n(e){return e&&"Widget"===e.type}t.exports=n},{}],6:[function(e,t){t.exports="1"},{}],7:[function(e,t){function n(e,t,n,o,c){this.tagName=e,this.properties=t||a,this.children=n||u,this.key=null!=o?String(o):void 0,this.namespace="string"==typeof c?c:null;var f,l=n&&n.length||0,d=0,v=!1,p=!1;for(var h in t)if(t.hasOwnProperty(h)){var m=t[h];s(m)&&(f||(f={}),f[h]=m)}for(var g=0;l>g;g++){var y=n[g];r(y)?(d+=y.count||0,!v&&y.hasWidgets&&(v=!0),p||!y.hooks&&!y.descendantHooks||(p=!0)):!v&&i(y)&&"function"==typeof y.destroy&&(v=!0)}this.count=l+d,this.hasWidgets=v,this.hooks=f,this.descendantHooks=p}var o=e("./version"),r=e("./is-vnode"),i=e("./is-widget"),s=e("./is-vhook");t.exports=n;var a={},u=[];n.prototype.version=o,n.prototype.type="VirtualNode"},{"./is-vhook":3,"./is-vnode":4,"./is-widget":5,"./version":6}],8:[function(e,t){function n(e){this.text=String(e)}var o=e("./version");t.exports=n,n.prototype.version=o,n.prototype.type="VirtualText"},{"./version":6}],9:[function(e,t){var n=e("vtree/diff");t.exports=n},{"vtree/diff":42}],10:[function(e,t){function n(e){return"object"==typeof e&&null!==e}t.exports=n},{}],11:[function(e,t){function n(e,t,n){for(var i in t){var u=t[i];void 0===u?o(e,t,n,i):a(u)?u.hook(e,i,n?n[i]:void 0):s(u)?r(e,t,n,i,u):void 0!==u&&(e[i]=u)}}function o(e,t,n,o){if(n){var r=n[o];if(!a(r))if("attributes"===o)for(var i in r)e.removeAttribute(i);else if("style"===o)for(var s in r)e.style[s]="";else e[o]="string"==typeof r?"":null}}function r(e,t,n,o,r){var a=n?n[o]:void 0;if("attributes"!==o){if(a&&s(a)&&i(a)!==i(r))return void(e[o]=r);s(e[o])||(e[o]={});var u="style"===o?"":void 0;for(var c in r){var f=r[c];e[o][c]=void 0===f?u:f}}else for(var l in r){var d=r[l];void 0===d?e.removeAttribute(l):e.setAttribute(l,d)}}function i(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var s=e("is-object"),a=e("vtree/is-vhook");t.exports=n},{"is-object":10,"vtree/is-vhook":45}],12:[function(e,t){function n(e,t){var c=t?t.document||o:o,f=t?t.warn:null;if(e=u(e).a,a(e))return e.init();if(s(e))return c.createTextNode(e.text);if(!i(e))return f&&f("Item is not a valid virtual dom node",e),null;var l=null===e.namespace?c.createElement(e.tagName):c.createElementNS(e.namespace,e.tagName),d=e.properties;r(l,d);for(var v=e.children,p=0;p<v.length;p++){var h=n(v[p],t);h&&l.appendChild(h)}return l}var o=e("global/document"),r=e("./apply-properties"),i=e("vtree/is-vnode"),s=e("vtree/is-vtext"),a=e("vtree/is-widget"),u=e("vtree/handle-thunk");t.exports=n},{"./apply-properties":11,"global/document":14,"vtree/handle-thunk":43,"vtree/is-vnode":46,"vtree/is-vtext":47,"vtree/is-widget":48}],13:[function(e,t){function n(e,t,n,r){return n&&0!==n.length?(n.sort(i),o(e,t,n,r,0)):{}}function o(e,t,n,i,a){if(i=i||{},e){r(n,a,a)&&(i[a]=e);var u=t.children;if(u)for(var c=e.childNodes,f=0;f<t.children.length;f++){a+=1;var l=u[f]||s,d=a+(l.count||0);r(n,a,d)&&o(c[f],l,n,i,a),a=d}}return i}function r(e,t,n){if(0===e.length)return!1;for(var o,r,i=0,s=e.length-1;s>=i;){if(o=(s+i)/2>>0,r=e[o],i===s)return r>=t&&n>=r;if(t>r)i=o+1;else{if(!(r>n))return!0;s=o-1}}return!1}function i(e,t){return e>t?1:-1}var s={};t.exports=n},{}],14:[function(e,t){(function(n){var o="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},r=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var i=o["__GLOBAL_DOCUMENT_CACHE@4"];i||(i=o["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],15:[function(e,t){function n(e,t,n){var u=e.type,d=e.vNode,p=e.patch;switch(u){case v.REMOVE:return o(t,d);case v.INSERT:return r(t,p,n);case v.VTEXT:return i(t,d,p,n);case v.WIDGET:return s(t,d,p,n);case v.VNODE:return a(t,d,p,n);case v.ORDER:return c(t,p),t;case v.PROPS:return l(t,p,d.properties),t;case v.THUNK:return f(t,n.patch(t,p,n));default:return t}}function o(e,t){var n=e.parentNode;return n&&n.removeChild(e),u(e,t),null}function r(e,t,n){var o=p(t,n);return e&&e.appendChild(o),e}function i(e,t,n,o){var r;if(3===e.nodeType)e.replaceData(0,e.length,n.text),r=e;else{var i=e.parentNode;r=p(n,o),i&&i.replaceChild(r,e)}return u(e,t),r}function s(e,t,n,o){if(h(t,n))return n.update(t,e)||e;var r=e.parentNode,i=p(n,o);return r&&r.replaceChild(i,e),u(e,t),i}function a(e,t,n,o){var r=e.parentNode,i=p(n,o);return r&&r.replaceChild(i,e),u(e,t),i}function u(e,t){"function"==typeof t.destroy&&d(t)&&t.destroy(e)}function c(e,t){var n,o=[],r=e.childNodes,i=r.length,s=t.reverse;for(n=0;i>n;n++)o.push(e.childNodes[n]);var a,u,c,f=0;for(n=0;i>n;n++)a=t[n],void 0!==a&&a!==n&&(s[n]>n&&f++,u=o[a],c=r[n+f]||null,u!==c&&e.insertBefore(u,c),n>a&&f--),n in t.removes&&f++}function f(e,t){return e&&t&&e!==t&&e.parentNode&&(console.log(e),e.parentNode.replaceChild(t,e)),t}var l=e("./apply-properties"),d=e("vtree/is-widget"),v=e("vtree/vpatch"),p=e("./create-element"),h=e("./update-widget");t.exports=n},{"./apply-properties":11,"./create-element":12,"./update-widget":17,"vtree/is-widget":48,"vtree/vpatch":52}],16:[function(e,t){function n(e,t){return o(e,t)}function o(e,t,n){var a=i(t);if(0===a.length)return e;var c=u(e,t.a,a),f=e.ownerDocument;n||(n={patch:o},f!==s&&(n.document=f));for(var l=0;l<a.length;l++){var d=a[l];e=r(e,c[d],t[d],n)}return e}function r(e,t,n,o){if(!t)return e;var r;if(a(n))for(var i=0;i<n.length;i++)r=c(n[i],t,o),t===e&&(e=r);else r=c(n,t,o),t===e&&(e=r);return e}function i(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}var s=e("global/document"),a=e("x-is-array"),u=e("./dom-index"),c=e("./patch-op");t.exports=n},{"./dom-index":13,"./patch-op":15,"global/document":14,"x-is-array":18}],17:[function(e,t){function n(e,t){return o(e)&&o(t)?"name"in e&&"name"in t?e.id===t.id:e.init===t.init:!1}var o=e("vtree/is-widget");t.exports=n},{"vtree/is-widget":48}],18:[function(e,t){function n(e){return"[object Array]"===r.call(e)}var o=Array.isArray,r=Object.prototype.toString;t.exports=o||n},{}],19:[function(e,t){var n=e("vdom/patch");t.exports=n},{"vdom/patch":16}],20:[function(e,t){function n(e){return this instanceof n?void(this.value=e):new n(e)}var o=e("data-set");t.exports=n,n.prototype.hook=function(e,t){var n=o(e),r=t.substr(5);n[r]=this.value}},{"data-set":25}],21:[function(e,t){function n(e){return this instanceof n?void(this.value=e):new n(e)}var o=e("data-set");t.exports=n,n.prototype.hook=function(e,t){var n=o(e),r=t.substr(3);n[r]=this.value}},{"data-set":25}],22:[function(e,t){function n(e){return this instanceof n?void(this.value=e):new n(e)}t.exports=n,n.prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},{}],23:[function(e,t){function n(e,t,n){var r,a,u,c,f=[];!n&&i(t)&&(n=t,a={}),a=a||t||{},r=p(e,a),"key"in a&&(u=a.key,a.key=void 0),"namespace"in a&&(c=a.namespace,a.namespace=void 0),"input"===r&&"value"in a&&void 0!==a.value&&!l(a.value)&&(a.value=h(a.value));for(var d,v,y=Object.keys(a),x=0;x<y.length;x++)d=y[x],v=a[d],l(v)||("data-"===d.substr(0,5)&&(a[d]=m(v)),"ev-"===d.substr(0,3)&&(a[d]=g(v)));void 0!==n&&null!==n&&o(n,f,r,a);var w=new s(r,a,f,u,c);return w}function o(e,t,n,i){if("string"==typeof e)t.push(new a(e));else if(r(e))t.push(e);else{if(!Array.isArray(e)){if(null===e||void 0===e)return;throw y({foreignObjectStr:JSON.stringify(e),foreignObject:e,parentVnodeStr:JSON.stringify({tagName:n,properties:i}),parentVnode:{tagName:n,properties:i}})}for(var s=0;s<e.length;s++)o(e[s],t,n,i)}}function r(e){return u(e)||c(e)||f(e)||d(e)}function i(e){return"string"==typeof e||Array.isArray(e)||r(e)}var s=e("vtree/vnode.js"),a=e("vtree/vtext.js"),u=e("vtree/is-vnode"),c=e("vtree/is-vtext"),f=e("vtree/is-widget"),l=e("vtree/is-vhook"),d=e("vtree/is-thunk"),v=e("error/typed"),p=e("./parse-tag.js"),h=e("./hooks/soft-set-hook.js"),m=e("./hooks/data-set-hook.js"),g=e("./hooks/ev-hook.js"),y=v({type:"virtual-hyperscript.unexpected.virtual-element",message:"Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot a {foreignObjectStr}.\nThe parent vnode is {parentVnodeStr}.\nSuggested fix: change your `h(..., [ ... ])` callsite.",foreignObjectStr:null,parentVnodeStr:null,foreignObject:null,parentVnode:null});t.exports=n},{"./hooks/data-set-hook.js":20,"./hooks/ev-hook.js":21,"./hooks/soft-set-hook.js":22,"./parse-tag.js":41,"error/typed":32,"vtree/is-thunk":33,"vtree/is-vhook":34,"vtree/is-vnode":35,"vtree/is-vtext":36,"vtree/is-widget":37,"vtree/vnode.js":39,"vtree/vtext.js":40}],24:[function(e,t){function n(e){var t=e.attributes,n={};if(null===t||void 0===t)return n;for(var o=0;o<t.length;o++){var r=t[o];"data-"===r.name.substr(0,5)&&(n[r.name.substr(5)]=r.value)}return n}t.exports=n},{}],25:[function(e,t){function n(e){var t=s(e);return t.hash||(t.hash=i(e)),t.hash}var o=e("weakmap-shim/create-store"),r=e("individual"),i=e("./create-hash.js"),s=r("__DATA_SET_WEAKMAP@3",o());t.exports=n},{"./create-hash.js":24,individual:26,"weakmap-shim/create-store":27}],26:[function(e,t){(function(e){function n(e,t){return o[e]?o[e]:(Object.defineProperty(o,e,{value:t,configurable:!0}),t)}var o="undefined"!=typeof window?window:"undefined"!=typeof e?e:{};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t){function n(){var e={};return function(t){if("object"!=typeof t||null===t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:o(t,e)}}var o=e("./hidden-store.js");t.exports=n},{"./hidden-store.js":28}],28:[function(e,t){function n(e,t){var n={identity:t},o=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?o.apply(this,arguments):n},writable:!0}),n}t.exports=n},{}],29:[function(e,t){function n(e){return e&&"object"==typeof e?a(e)||u(e)?e:s(e)?r(e,n):i(f(e),function(t,r){var i=o(r);return t[i]=n(e[r]),t},{}):e}function o(e){return e.replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()})}function r(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}function i(e,t,n){if(e.reduce)return e.reduce(t,n);for(var o=0;o<e.length;o++)n=t(n,e[o],o);return n}t.exports=function(e){return"string"==typeof e?o(e):n(e)};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e){return"[object Date]"===Object.prototype.toString.call(e)},u=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},c=Object.prototype.hasOwnProperty,f=Object.keys||function(e){var t=[];for(var n in e)c.call(e,n)&&t.push(n);return t}},{}],30:[function(e,t){function n(e){var t;return t=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:r.call(arguments,1),t&&t.hasOwnProperty||(t={}),e.replace(o,function(n,o,r){var i;return"{"===e[r-1]&&"}"===e[r+n.length]?o:(i=t.hasOwnProperty(o)?t[o]:null,null===i||void 0===i?"":i)})}var o=/\{([0-9a-zA-Z]+)\}/g,r=Array.prototype.slice;t.exports=n},{}],31:[function(e,t){function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}t.exports=n},{}],32:[function(e,t){function n(e){function t(t){var o=new Error;Object.defineProperty(o,"type",{value:o.type,enumerable:!0,writable:!0,configurable:!0});var s=i({},e,t);return i(o,s),o.message=r(n,s),o}if(!e)throw new Error("args is required");if(!e.type)throw new Error("args.type is required");if(!e.message)throw new Error("args.message is required");var n=e.message;if(e.type&&!e.name){var s=o(e.type)+"Error";e.name=s[0].toUpperCase()+s.substr(1)}return t.type=e.type,t._name=e.name,t}var o=e("camelize"),r=e("string-template"),i=e("xtend/mutable");t.exports=n},{camelize:29,"string-template":30,"xtend/mutable":31}],33:[function(e,t){function n(e){return e&&"Thunk"===e.type}t.exports=n},{}],34:[function(e,t){t.exports=e(3)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-vhook.js":3}],35:[function(e,t){t.exports=e(4)},{"./version":38,"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-vnode.js":4}],36:[function(e,t){function n(e){return e&&"VirtualText"===e.type&&e.version===o}var o=e("./version");t.exports=n},{"./version":38}],37:[function(e,t){t.exports=e(5)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-widget.js":5}],38:[function(e,t){t.exports=e(6)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/version.js":6}],39:[function(e,t){t.exports=e(7)},{"./is-vhook":34,"./is-vnode":35,"./is-widget":37,"./version":38,"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/vnode.js":7}],40:[function(e,t){t.exports=e(8)},{"./version":38,"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/vtext.js":8}],41:[function(e,t){function n(e,t){if(!e)return"div";var n=!("id"in t),i=e.split(o),s=null;r.test(i[1])&&(s="div");var a,u,c,f;for(f=0;f<i.length;f++)u=i[f],u&&(c=u.charAt(0),s?"."===c?(a=a||[],a.push(u.substring(1,u.length))):"#"===c&&n&&(t.id=u.substring(1,u.length)):s=u);return a&&(t.className&&a.push(t.className),t.className=a.join(" ")),s?s.toLowerCase():"div"}var o=/([\.#]?[a-zA-Z0-9_:-]+)/,r=/^\.|#/;t.exports=n},{}],42:[function(e,t){function n(e,t){var n={a:e};return o(e,t,n,0),n}function o(e,t,n,o){if(e===t)return void(w(e)||w(t)?u(e,t,n,o):f(t,n,o));var i=n[o];if(null==t)i=v(i,new m(m.REMOVE,e,t)),a(e,n,o);else if(w(e)||w(t))u(e,t,n,o);else if(g(t))if(g(e)){if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var c=r(e.properties,t.properties,t.hooks);c&&(i=v(i,new m(m.PROPS,e,c)))}else i=v(i,new m(m.VNODE,e,t)),a(e,n,o);i=s(e,t,n,i,o)}else i=v(i,new m(m.VNODE,e,t)),a(e,n,o);else y(t)?y(e)?e.text!==t.text&&(i=v(i,new m(m.VTEXT,e,t))):(i=v(i,new m(m.VTEXT,e,t)),a(e,n,o)):x(t)&&(i=v(i,new m(m.WIDGET,e,t)),x(e)||a(e,n,o));i&&(n[o]=i)}function r(e,t,n){var o;for(var s in e){s in t||(o=o||{},o[s]=void 0);var a=e[s],u=t[s];if(n&&s in n)o=o||{},o[s]=u;else if(h(a)&&h(u))if(i(u)!==i(a))o=o||{},o[s]=u;else{var c=r(a,u);c&&(o=o||{},o[s]=c)}else a!==u&&(o=o||{},o[s]=u)}for(var f in t)f in e||(o=o||{},o[f]=t[f]);return o}function i(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}function s(e,t,n,r,i){for(var s=e.children,u=l(s,t.children),c=s.length,f=u.length,d=c>f?c:f,p=0;d>p;p++){var h=s[p],y=u[p];i+=1,h?y?o(h,y,n,i):h&&(n[i]=new m(m.REMOVE,h,null),a(h,n,i)):y&&(r=v(r,new m(m.INSERT,null,y))),g(h)&&h.count&&(i+=h.count)}return u.moves&&(r=v(r,new m(m.ORDER,e,u.moves))),r}function a(e,t,n){if(x(e))"function"==typeof e.destroy&&(t[n]=new m(m.REMOVE,e,null));else if(g(e)&&e.hasWidgets)for(var o=e.children,r=o.length,i=0;r>i;i++){var s=o[i];n+=1,a(s,t,n),g(s)&&s.count&&(n+=s.count)}}function u(e,t,o,r){var i=N(e,t),s=n(i.a,i.b);c(s)&&(o[r]=new m(m.THUNK,null,s))}function c(e){for(var t in e)if("a"!==t)return!0;return!1}function f(e,t,n){if(g(e)&&(e.hooks&&(t[n]=new m(m.PROPS,e.hooks,e.hooks)),e.descendantHooks))for(var o=e.children,r=o.length,i=0;r>i;i++){var s=o[i];n+=1,f(s,t,n),g(s)&&s.count&&(n+=s.count)}}function l(e,t){var n=d(t);if(!n)return t;var o=d(e);if(!o)return t;var r={},i={};for(var s in n)r[n[s]]=o[s];for(var s in o)i[o[s]]=n[s];for(var a=e.length,u=t.length,c=a>u?a:u,f=[],l=0,v=0,p=0,h={},m=h.removes={},g=h.reverse={},y=!1;c>l;){var x=i[v];if(void 0!==x)f[v]=t[x],x!==p&&(h[x]=p,g[p]=x,y=!0),p++;else if(v in i)f[v]=void 0,m[v]=p++,y=!0;else{for(;void 0!==r[l];)l++;if(c>l){var w=t[l];w&&(f[v]=w,l!==p&&(y=!0,h[l]=p,g[p]=l),p++),l++}}v++}return y&&(f.moves=h),f}function d(e){var t,n;for(t=0;t<e.length;t++){var o=e[t];void 0!==o.key&&(n=n||{},n[o.key]=t)}return n}function v(e,t){return e?(p(e)?e.push(t):e=[e,t],e):t}var p=e("x-is-array"),h=e("is-object"),m=e("./vpatch"),g=e("./is-vnode"),y=e("./is-vtext"),x=e("./is-widget"),w=e("./is-thunk"),N=e("./handle-thunk");t.exports=n},{"./handle-thunk":43,"./is-thunk":44,"./is-vnode":46,"./is-vtext":47,"./is-widget":48,"./vpatch":52,"is-object":49,"x-is-array":50}],43:[function(e,t){function n(e,t){var n=e,r=t;return a(t)&&(r=o(t,e)),a(e)&&(n=o(e,null)),{a:n,b:r}}function o(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(r(n)||i(n)||s(n)))throw new Error("thunk did not return a valid node");return n}var r=e("./is-vnode"),i=e("./is-vtext"),s=e("./is-widget"),a=e("./is-thunk");t.exports=n},{"./is-thunk":44,"./is-vnode":46,"./is-vtext":47,"./is-widget":48}],44:[function(e,t){t.exports=e(33)},{"/web/scribe-plugin-noting/node_modules/virtual-hyperscript/node_modules/vtree/is-thunk.js":33}],45:[function(e,t){t.exports=e(3)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-vhook.js":3}],46:[function(e,t){t.exports=e(4)},{"./version":51,"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-vnode.js":4}],47:[function(e,t){t.exports=e(36)},{"./version":51,"/web/scribe-plugin-noting/node_modules/virtual-hyperscript/node_modules/vtree/is-vtext.js":36}],48:[function(e,t){t.exports=e(5)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/is-widget.js":5}],49:[function(e,t){t.exports=e(10)},{"/web/scribe-plugin-noting/node_modules/virtual-dom/node_modules/is-object/index.js":10}],50:[function(e,t){t.exports=e(18)},{"/web/scribe-plugin-noting/node_modules/virtual-dom/node_modules/x-is-array/index.js":18}],51:[function(e,t){t.exports=e(6)},{"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/version.js":6}],52:[function(e,t){function n(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}var o=e("./version");n.NONE=0,n.VTEXT=1,n.VNODE=2,n.WIDGET=3,n.PROPS=4,n.ORDER=5,n.INSERT=6,n.REMOVE=7,n.THUNK=8,t.exports=n,n.prototype.version=o,n.prototype.type="VirtualPatch"},{"./version":51}],53:[function(e,t){t.exports=e(8)},{"./version":51,"/web/scribe-plugin-noting/node_modules/vdom-virtualize/node_modules/vtree/vtext.js":8}],54:[function(e,t){var n=e("./src/noting-commands");t.exports=function(e){return function(t){n.init(t,e)}}},{"./src/noting-commands":69}],55:[function(e,t){var n=e("lodash"),o=e("../../utils/vfocus/is-vfocus"),r=(e("../../utils/vfocus/is-vtext"),e("../../utils/vfocus/is-empty")),i=e("../../utils/noting/find-all-notes"),s=e("../../utils/vfocus/flatten-tree");t.exports=function(e){if(!o(e))throw new Error("Only a valid VFocus can be passed to removeEmptyNotes");var t=n.flatten(i(e)),a=t.map(s);a.forEach(function(e){var t=e.splice(0,1)[0];if(e.length<=0)return void t.remove();var n=e.reduce(function(e,t){return r(t)?!0:!1},!0);n&&t.remove()})}},{"../../utils/noting/find-all-notes":73,"../../utils/vfocus/flatten-tree":97,"../../utils/vfocus/is-empty":100,"../../utils/vfocus/is-vfocus":103,"../../utils/vfocus/is-vtext":104,lodash:"lodash"}],56:[function(e,t){var n=e("../../utils/vfocus/is-vfocus"),o=e("../../utils/noting/is-scribe-marker");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to removeScribemarkers");e.filter(o).forEach(function(e){e.remove()})}},{"../../utils/noting/is-scribe-marker":87,"../../utils/vfocus/is-vfocus":103}],57:[function(e,t){{var n=e("lodash"),o=e("../../actions/vdom/add-class"),r=e("../../actions/vdom/remove-class");e("../../utils/vfocus/is-vfocus")}t.exports=function(e){return e?(e=n.isArray(e)?e:[e],e.forEach(function(e){e=e.vNode?e.vNode:e,r(e,"note--start"),r(e,"note--end")}),o(e[0].vNode,"note--start"),o(e[e.length-1].vNode,"note--end"),e):void 0}},{"../../actions/vdom/add-class":63,"../../actions/vdom/remove-class":64,"../../utils/vfocus/is-vfocus":103,lodash:"lodash"}],58:[function(e,t){var n=e("../../utils/vfocus/is-vfocus"),o=e("./toggle-note-classes"),r=e("../../utils/noting/find-all-notes"),i="note--collapsed";t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to toggleAllNoteCollapseState");var t=r(e);return o(t,i)}},{"../../utils/noting/find-all-notes":73,"../../utils/vfocus/is-vfocus":103,"./toggle-note-classes":59}],59:[function(e,t){var n=e("lodash"),o=e("../vdom/toggle-class");t.exports=function(e,t){if(!e||!t)throw new Error("A valid collection of notes and a valid className must be passed to toggleNoteClasses");e=n.isArray(e)?e:[e],e=n.flatten(e),e.forEach(function(e){o(e,t)})}},{"../vdom/toggle-class":65,lodash:"lodash"}],60:[function(e,t){var n=e("../../utils/vfocus/is-vfocus"),o=e("./toggle-note-classes"),r=e("../../utils/noting/find-selected-note"),i="note--collapsed";t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to toggleSelectedNoteCollapseState");var t=r(e);if(t)return o(t,i)}},{"../../utils/noting/find-selected-note":81,"../../utils/vfocus/is-vfocus":103,"./toggle-note-classes":59}],61:[function(e,t){var n=e("lodash"),o=e("../../utils/vfocus/is-vfocus"),r=e("../../utils/noting/is-note");t.exports=function(e){if(!o(e)||!e.parent)throw new Error("Only a valid VFocus element can be passed to unWrapNote");if(!r(e))throw new Error("Only a note may be passed to unWrapnote");var t=e.vNode,i=e.parent.vNode?e.parent.vNode.children:e.parent.children;return i.splice(i.indexOf(t),1,t.children),e.parent.vNode.children=n.flatten(i),e.vNode=e.parent.vNode,e.parent=e.parent.parent,e}},{"../../utils/noting/is-note":86,"../../utils/vfocus/is-vfocus":103,lodash:"lodash"}],62:[function(e,t){var n="gu-note",o="note",r=e("lodash"),i=e("virtual-hyperscript"),s=e("../../utils/get-uk-date");t.exports=function(e,t){var a=r.isArray(e)?e:[e];t=t?r.clone(t):{};var u=n+"."+o;return i(u,{title:s(t),dataset:t},a)}},{"../../utils/get-uk-date":72,lodash:"lodash","virtual-hyperscript":23}],63:[function(e,t){var n=e("../../utils/vdom/has-class");t.exports=function(e,t){if(!e||!t)throw new Error("A valid vNode and className must be passed to addClass");return n(e,t)?e:e.properties.className?(e.properties.className=e.properties.className+" "+t,e):(e.properties.className=t,e)}},{"../../utils/vdom/has-class":93}],64:[function(e,t){var n=e("../../utils/vdom/has-class");t.exports=function(e,t){if(!e||!t)throw new Error("A valid vNode and className must be passed to removeClass");if(!n(e,t))return e;var o=new RegExp(t,["g"]);return e.properties.className=e.properties.className.replace(o,""),e}},{"../../utils/vdom/has-class":93}],65:[function(e,t){var n=e("../../utils/vfocus/is-vfocus"),o=e("../../utils/vdom/has-class"),r=e("./add-class"),i=e("./remove-class");t.exports=function(e,t){if(n(e)&&(e=e.vNode),!e||!t)throw new Error("A valid vNode and className must be passed to toggleClass");return o(e,t)?i(e,t):r(e,t)}},{"../../utils/vdom/has-class":93,"../../utils/vfocus/is-vfocus":103,"./add-class":63,"./remove-class":64}],66:[function(e,t,n){n.collapseToggleSelectedNote=e("../actions/noting/toggle-selected-note-collapse-state"),n.collapseToggleAllNote=e("../actions/noting/toggle-all-note-collapse-state")},{"../actions/noting/toggle-all-note-collapse-state":58,"../actions/noting/toggle-selected-note-collapse-state":60}],67:[function(e,t,n){"use strict";function o(e){O(e);var t=k();e.forEach(function(e){e.vNode.properties.dataset.noteId=t})}function r(){var e={};return e[x]=n.user,e[w]=(new Date).toISOString(),e}function i(){return p("em.scribe-marker",[])}function s(){return new g("​")}function a(e){function t(e){e.filter(N.focusOnTextNode).forEach(function(e){e.vNode.text=e.vNode.text.replace(/\u200B/g,"")})}function n(e){N.findAllNotes(e).forEach(function(e){h.first(e).next().insertBefore(s());var t=h.last(e).find(N.focusOutsideNote),n=t&&t.find(N.focusOnNonEmptyTextNode);n&&(n.vNode.text="​"+n.vNode.text)})}t(e),n(e)}function u(e){var t="​",n=b([t,i()],r()),s=N.findMarkers(e)[0];s.replace(n);var a=N.findEntireNote(s);o(a)}function c(e){var t=N.findTextNodeFocusesBetweenMarkers(e).filter(N.focusOutsideNote),n=r(),s=t.map(function(e){return b(e.vNode,n)});h.zip(t,s).forEach(function(e){var t=e[0],n=e[1];t.replace(n)}),v(e),N.removeVirtualScribeMarkers(e);var a=N.findLastNoteSegment(t[0]),u=N.findEntireNote(a);o(u),N.updateNotesCache(e);var c=h.last(u).find(N.focusOutsideNote);if(c)if(N.focusOnParagraph(c)){var f=c.find(N.focusOnNonEmptyTextNode);f&&f.insertBefore(i())}else c.insertBefore([new g("​"),i()]);N.removeEmptyNotes(e)}function f(e){var t=N.findMarkers(e)[0];N.updateNotesCache(e);var o=N.findAncestorNoteSegment(t),r=N.findNote(e,o.vNode.properties.dataset.noteId);r.forEach(E),n.ensureNoteIntegrity(e)}function l(e){function t(e){var t=e.vNode;return-1===u.indexOf(t)}var o=N.findTextNodeFocusesBetweenMarkers(e),i=N.findEntireNote(o[0]),s=h(i).map(N.focusAndDescendants).flatten().value().filter(N.focusOnTextNode),a=s.map(function(e){return e.vNode}),u=o.map(function(e){return e.vNode}),c=h.difference(a,u),f=s.filter(t),l=r(),d=c.map(function(e){return b(e,l)});h.zip(f,d).forEach(function(e){var t=e[0],n=e[1];t.replace(n)}),i.forEach(E);var v=f[0];if(v){var p=f[0].top();n.ensureNoteIntegrity(p)}var m=N.findMarkers(e.refresh());h.last(m).insertAfter(new g("​")),m[0].remove(),N.removeEmptyNotes(e.refresh())}function d(e){function t(e){function t(e){return e.vNode.properties.dataset[w]}var n=h(e).map(t).uniq().value();return n.length>1}function n(e){var t="noteStart"in e[0].vNode.properties.dataset,n="noteEnd"in e[e.length-1].vNode.properties.dataset;return!(t&&n)}function r(e){return t(e)||n(e)}N.findAllNotes(e).filter(r).forEach(o)}function v(e){function t(e){return!!e}function n(e){for(var t=e;t;)t.canDown()||t.remove(),t=t.up()}function o(e){var t=e.prev().find(N.focusOnNote,"prev");if(t){var n=h.last(t.vNode.children.filter(m));n&&(n.text=n.text+" ")}}var r=N.findMarkers(e);if(2!==r.length){var i=r[0];if(i){var s=[i.find(N.focusOnNote,"prev"),i.find(N.focusOnNote)].filter(t);s.filter(function(e){return!!e}).map(function(e){if(N.withEmptyTextNode(e)&&o(e),N.withoutText(e)||N.withEmptyTextNode(e)){var t=e.replace(new g("​"));n(t)}})}}}n.user="unknown";var p=e("virtual-hyperscript"),h=e("lodash"),m=e("vtree/is-vtext"),g=e("vtree/vtext"),y="GU-NOTE",x="noteEditedBy",w="noteEditedDate",N=e("./note-vdom"),b=(e("../utils/get-uk-date"),e("../actions/noting/wrap-in-note")),E=e("../actions/noting/unwrap-note"),k=(e("../actions/vdom/add-class"),e("../actions/vdom/remove-class"),e("../utils/generate-uuid")),O=e("../actions/noting/reset-note-segment-classes");n.ensureNoteIntegrity=function(e){N.updateNotesCache(e),d(e),a(e),v(e)},n.toggleNoteAtSelection=function(e){function t(){var t,n=N.findMarkers(e),o=1===n.length,r=N.selectionEntirelyWithinNote(n);return t=o&&r?"caretWithinNote":r?"selectionWithinNote":o?"caretOutsideNote":"selectionOutsideNote"}var n={caretWithinNote:function(e){f(e)},selectionWithinNote:function(e){l(e)},caretOutsideNote:function(e){u(e)},selectionOutsideNote:function(e){c(e)}};n[t()](e)},n.isSelectionInANote=function(e,t){function n(e,o){return e.parentNode&&e!==t?o(e)?e:n(e.parentNode,o):!1}function o(e){return n(e,function(e){return e.tagName===y})}return o(e.startContainer)&&o(e.endContainer)&&!0}},{"../actions/noting/reset-note-segment-classes":57,"../actions/noting/unwrap-note":61,"../actions/noting/wrap-in-note":62,"../actions/vdom/add-class":63,"../actions/vdom/remove-class":64,"../utils/generate-uuid":71,"../utils/get-uk-date":72,"./note-vdom":68,lodash:"lodash","virtual-hyperscript":23,"vtree/is-vtext":47,"vtree/vtext":53}],68:[function(e,t,n){"use strict";var o=(e("lodash"),e("vtree/is-vtext"),e("../utils/vdom/has-class"),e("../utils/vdom/has-attribute"),e("../utils/vdom/is-tag"),e("../utils/vdom/is-empty"),e("../utils/noting/is-note")),r=e("../utils/noting/is-scribe-marker"),i=(e("../utils/noting/is-not-scribe-marker"),e("../utils/vfocus/is-vtext")),s=e("../utils/vfocus/is-empty"),a=e("../utils/vfocus/is-not-empty"),u=e("../utils/vfocus/is-paragraph"),c=(e("../utils/vfocus/find-text-nodes"),e("../utils/noting/is-not-within-note")),f=(e("../utils/noting/has-note-id"),e("../utils/noting/is-within-note"),e("../utils/noting/find-between-scribe-markers"),e("../utils/noting/find-parent-note")),l=e("../utils/noting/find-text-between-scribe-markers"),d=e("../utils/noting/find-scribe-markers"),v=e("../utils/noting/find-first-note"),p=e("../utils/noting/find-last-note"),h=e("../utils/vfocus/flatten-tree"),m=e("../utils/vfocus/has-no-text-children"),g=e("../utils/vfocus/has-only-empty-text-children"),y=e("../utils/noting/find-entire-note"),x=(e("../utils/noting/find-all-notes"),e("../utils/noting/find-note-by-id")),w=e("../utils/noting/find-selected-note"),N=e("../utils/noting/is-selection-within-note"),b=e("../actions/noting/remove-scribe-markers"),E=e("../actions/noting/remove-empty-notes"),k=e("../utils/noting/note-cache"),O=k.get,_=k.set;n.focusAndDescendants=h,n.focusOnEmptyTextNode=s,n.focusOnNonEmptyTextNode=a,n.focusOnMarker=r,n.focusOnNote=o,n.focusOnParagraph=u,n.focusOnTextNode=i,n.withoutText=m,n.withEmptyTextNode=g,n.findLastNoteSegment=p,n.focusOutsideNote=c,n.findSelectedNote=w,n.findAllNotes=O,n.findEntireNote=y,n.findNote=x,n.findFirstNoteSegment=v,n.findMarkers=d,n.findAncestorNoteSegment=f,n.findTextNodeFocusesBetweenMarkers=l,n.removeEmptyNotes=E,n.removeVirtualScribeMarkers=b,n.selectionEntirelyWithinNote=N,n.updateNotesCache=_
},{"../actions/noting/remove-empty-notes":55,"../actions/noting/remove-scribe-markers":56,"../utils/noting/find-all-notes":73,"../utils/noting/find-between-scribe-markers":74,"../utils/noting/find-entire-note":75,"../utils/noting/find-first-note":76,"../utils/noting/find-last-note":77,"../utils/noting/find-note-by-id":78,"../utils/noting/find-parent-note":79,"../utils/noting/find-scribe-markers":80,"../utils/noting/find-selected-note":81,"../utils/noting/find-text-between-scribe-markers":82,"../utils/noting/has-note-id":83,"../utils/noting/is-not-scribe-marker":84,"../utils/noting/is-not-within-note":85,"../utils/noting/is-note":86,"../utils/noting/is-scribe-marker":87,"../utils/noting/is-selection-within-note":88,"../utils/noting/is-within-note":89,"../utils/noting/note-cache":90,"../utils/vdom/has-attribute":92,"../utils/vdom/has-class":93,"../utils/vdom/is-empty":94,"../utils/vdom/is-tag":95,"../utils/vfocus/find-text-nodes":96,"../utils/vfocus/flatten-tree":97,"../utils/vfocus/has-no-text-children":98,"../utils/vfocus/has-only-empty-text-children":99,"../utils/vfocus/is-empty":100,"../utils/vfocus/is-not-empty":101,"../utils/vfocus/is-paragraph":102,"../utils/vfocus/is-vtext":104,lodash:"lodash","vtree/is-vtext":47}],69:[function(e,t,n){"use strict";function o(e){var t=new e.api.Command("insertHTML");return t.execute=function(){l.mutateScribe(e,function(e,t){c.toggleNoteAtSelection(e,t)})},t.queryState=function(){var t=new e.api.Selection;return c.isSelectionInANote(t.range,e.el)},t.queryEnabled=function(){return!0},t}function r(e){var t=new e.api.Command("insertHTML");return t.execute=function(){l.mutateScribe(e,function(e){f.collapseToggleSelectedNote(e)})},t.queryState=function(){},t}function i(e){var t=new e.api.Command("insertHTML");return t.execute=function(){var e=!window._scribe_plugin_noting__noteCollapsedState,t=d.toArray(document.querySelectorAll(f.scribeInstancesSelector));t.forEach(function(t){l.mutate(t,function(t){f.collapseToggleAllNotes(t,e)})}),window._scribe_plugin_noting__noteCollapsedState=e},t.queryEnabled=function(){return!!e.el.getElementsByTagName("gu-note").length},t.queryState=function(){return this.queryEnabled()&&!!window._scribe_plugin_noting__noteCollapsedState},t}function s(e){e.el.addEventListener("keydown",function(t){var n=119===t.keyCode,o=121===t.keyCode,r=t.altKey&&8===t.keyCode;(n||o||r)&&(t.preventDefault(),e.getCommand("note").execute())})}function a(e){e.el.addEventListener("click",function(t){var n=t.target;if("GU-NOTE"==n.nodeName){var o=new e.api.Selection,r=document.createRange();r.selectNodeContents(n),o.selection.removeAllRanges(),o.selection.addRange(r),e.getCommand("noteCollapseToggle").execute()}})}function u(e){function t(){l.mutateScribe(e,function(e){c.ensureNoteIntegrity(e)})}var n=d.throttle(t,1e3);e.el.addEventListener("input",n)}var c=e("./api/note-toggle"),f=e("./api/note-collapse"),l=e("./noting-vdom"),d=e("lodash");n.init=function(e,t){c.user=t.user,f.scribeInstancesSelector=t.scribeInstancesSelector,e.commands.note=o(e),e.commands.noteCollapseToggle=r(e),e.commands.noteCollapseToggleAll=i(e),s(e),a(e),u(e)}},{"./api/note-collapse":66,"./api/note-toggle":67,"./noting-vdom":70,lodash:"lodash"}],70:[function(e,t,n){var o=(e("lodash"),e("virtual-dom/diff")),r=e("virtual-dom/patch"),i=e("vdom-virtualize"),s=(e("vtree/is-vtext"),e("./vfocus"));n.mutate=function(e,t){var n=i(e),a=i(e),u=new s(a);t(u);var c=o(n,a);r(e,c)},n.mutateScribe=function(e,t){var o=new e.api.Selection;e.transactionManager.run(function(){o.placeMarkers(),n.mutate(e.el,function(e){t(e,o)}),o.selectMarkers(),o.removeMarkers()})}},{"./vfocus":105,lodash:"lodash","vdom-virtualize":2,"virtual-dom/diff":9,"virtual-dom/patch":19,"vtree/is-vtext":47}],71:[function(e,t){t.exports=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t}},{}],72:[function(e,t){var n="noteEditedBy",o="noteEditedDate";t.exports=function(e){e=e||{};var t=e[o]?new Date(e[o]):new Date,r=e[n]?e[n]:"unknown",i=[t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),"at",t.getHours()+":"+(t.getMinutes()<9?"0":"")+t.getMinutes()].join(" ");return r+" "+i}},{}],73:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("./is-note"),i=e("./find-entire-note");t.exports=function(e){if(!o(e))throw new Error("Only a valid VFocus element can be passed to findNoteById");return e.filter(r).map(i).reduce(function(e,t){return 0===e.length?e.concat([t]):n.last(e)[0].vNode===t[0].vNode?e:e.concat([t])},[])}},{"../vfocus/is-vfocus":103,"./find-entire-note":75,"./is-note":86,lodash:"lodash"}],74:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("./is-scribe-marker"),r=e("./is-not-scribe-marker");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus element can be passed to findBetweenScribeMarkers");var t=e.find(o);return t?t.next().takeWhile(r):[]}},{"../vfocus/is-vfocus":103,"./is-not-scribe-marker":84,"./is-scribe-marker":87}],75:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("./is-within-note"),r=e("./is-note"),i=e("./find-first-note");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus element can be passed to findEntirenote");var t=i(e);if(t)return t.takeWhile(o).filter(r)}},{"../vfocus/is-vfocus":103,"./find-first-note":76,"./is-note":86,"./is-within-note":89}],76:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("./is-within-note"),i=e("./is-note");t.exports=function(e){if(!o(e))throw new Error("Only a valid vfocus can be passed to findFirstNote");return n.last(e.takeWhile(r,"prev").filter(i))}},{"../vfocus/is-vfocus":103,"./is-note":86,"./is-within-note":89,lodash:"lodash"}],77:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("./is-within-note"),i=e("./is-note");t.exports=function(e){if(!o(e))throw new Error("Only a valid vfocus can be passed to findFirstNote");return n.last(e.takeWhile(r).filter(i))}},{"../vfocus/is-vfocus":103,"./is-note":86,"./is-within-note":89,lodash:"lodash"}],78:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("./has-note-id"),i=e("./find-all-notes");t.exports=function(e,t){if(!o(e))throw new Error("Only a valid VFocus element can be passed to findNoteById");var s=n.flatten(i(e));return s.filter(function(e){return r(e.vNode,t)})}},{"../vfocus/is-vfocus":103,"./find-all-notes":73,"./has-note-id":83,lodash:"lodash"}],79:[function(e,t){var n=e("../noting/is-note"),o=e("../vfocus/is-vfocus");t.exports=function(e){if(!o(e))throw new Error("Only a VFocus element should be passed to findParentNote");return e.find(n,"up")}},{"../noting/is-note":86,"../vfocus/is-vfocus":103}],80:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("./is-scribe-marker");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus element can be passed to findScribeMarkers");return e.filter(o)}},{"../vfocus/is-vfocus":103,"./is-scribe-marker":87}],81:[function(e,t){var n=e("../vfocus/is-vfocus"),o=(e("../../vfocus"),e("./find-scribe-markers")),r=e("./find-parent-note"),i=e("./find-entire-note");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus element can be passed to findSelectedNote");var t=o(e);if(!(t.length<=0)){var s=t[0],a=r(s);if(a)return a&&i(a)||void 0}}},{"../../vfocus":105,"../vfocus/is-vfocus":103,"./find-entire-note":75,"./find-parent-note":79,"./find-scribe-markers":80}],82:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("./find-between-scribe-markers"),r=e("../vfocus/find-text-nodes");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus element can be passed to findTextBetweenScribeMarkers");return r(o(e))}},{"../vfocus/find-text-nodes":96,"../vfocus/is-vfocus":103,"./find-between-scribe-markers":74}],83:[function(e,t){{var n=e("../vdom/has-attribute");e("../vfocus/is-vfocus")}t.exports=function(e,t){return n(e,"data-note-id",t)}},{"../vdom/has-attribute":92,"../vfocus/is-vfocus":103}],84:[function(e,t){var n=e("./is-scribe-marker");t.exports=function(e){return!n(e)}},{"./is-scribe-marker":87}],85:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("./find-parent-note");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to isNotWithinNote");return!o(e)}},{"../vfocus/is-vfocus":103,"./find-parent-note":79}],86:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("../vdom/is-tag");t.exports=function(e){if(!n(e))throw new Error("Only a VFocus element should be passed to isNote()");return o(e.vNode,"gu-note")}},{"../vdom/is-tag":95,"../vfocus/is-vfocus":103}],87:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("../vdom/has-class");t.exports=function(e){if(!n(e))throw new Error("Only a VFocus element should be passed to isNote()");return o(e.vNode,"scribe-marker")}},{"../vdom/has-class":93,"../vfocus/is-vfocus":103}],88:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("./find-parent-note"),i=e("./is-not-scribe-marker"),s=e("../vfocus/is-vtext"),a=e("./find-scribe-markers");t.exports=function(e){if(o(e)&&(e=a(e)),!n.isArray(e))throw new Error("Only an array of markers or a valid VFocus element can be passed to isSelectionBetweenNotes");if(!(e.length<=0)){if(2===e.length){var t=e[0].next().takeWhile(i).filter(s);return t.every(r)}return!!r(e[0])}}},{"../vfocus/is-vfocus":103,"../vfocus/is-vtext":104,"./find-parent-note":79,"./find-scribe-markers":80,"./is-not-scribe-marker":84,lodash:"lodash"}],89:[function(e,t){var n=e("../vfocus/is-vfocus"),o=e("../vfocus/is-vtext"),r=e("../vfocus/is-empty"),i=e("../noting/find-parent-note");t.exports=function(e){if(!n(e))throw new Error("Only a vaid VFocus can be passed to isWithinNote");return!o(e)||r(e)||!!i(e)}},{"../noting/find-parent-note":79,"../vfocus/is-empty":100,"../vfocus/is-vfocus":103,"../vfocus/is-vtext":104}],90:[function(e,t){function n(e){if(!i(e))throw new Error("only a valid VFocus can be passed to notesCache");return r&&0!==r.length||(r=o(e)),r}function o(e){if(!i(e))throw new Error("only a valid VFocus can be passed to notesCache");return r=s(e)}var r,i=e("../vfocus/is-vfocus"),s=e("./find-all-notes");t.exports={get:n,set:o}},{"../vfocus/is-vfocus":103,"./find-all-notes":73}],91:[function(e,t){t.exports=function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}},{}],92:[function(e,t){var n=e("../to-camel-case");t.exports=function(e,t,o){if(!e||!t)throw new Error("Incorrect arguments passed to hasAttribute");var r=/data/.test(t),i=!!e.properties&&!!e.properties.dataset;return r&&i?(t=t.substring(5,t.length),t=n(t),e.properties.dataset[t]===o):e.properties[t]?e.properties[t].value?e.properties[t].value===o:e.properties[t]===o:!1}},{"../to-camel-case":91}],93:[function(e,t){e("lodash");t.exports=function(e,t){if(!e||!e.properties||!e.properties.className)return!1;var n=new RegExp(t);return n.test(e.properties.className)}},{lodash:"lodash"}],94:[function(e,t){var n=(e("lodash"),e("vtree/is-vtext"));t.exports=function(e){if(n(e)){var t=e.text;return""===t||"​"===t||" "===t||" "===t}return e.children.length<=0}},{lodash:"lodash","vtree/is-vtext":47}],95:[function(e,t){t.exports=function(e,t){return e.tagName&&e.tagName.toLowerCase()===t}},{}],96:[function(e,t){var n=e("lodash"),o=e("../vfocus/is-vfocus"),r=e("../vfocus/is-vtext");t.exports=function(e){return e=n.isArray(e)?e:[e],e.forEach(function(e){if(!o(e))throw new Error("Only valid VFocus elements should be passed to findTextNodes")}),e.filter(r)}},{"../vfocus/is-vfocus":103,"../vfocus/is-vtext":104,lodash:"lodash"}],97:[function(e,t){var n=e("./is-vfocus");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to flattenTree");return e.takeWhile(function(t){return!!t.find(function(t){return t.vNode===e.vNode},"up")})}},{"./is-vfocus":103}],98:[function(e,t){var n=e("./is-vfocus"),o=e("./flatten-tree"),r=e("./is-vtext");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passes to hasNoTextChildren");return 0===o(e).filter(r).length}},{"./flatten-tree":97,"./is-vfocus":103,"./is-vtext":104}],99:[function(e,t){var n=e("./is-vfocus"),o=e("./flatten-tree"),r=e("./is-vtext"),i=e("./is-empty");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passes to hasNoTextChildren");return o(e).filter(r).every(i)}},{"./flatten-tree":97,"./is-empty":100,"./is-vfocus":103,"./is-vtext":104}],100:[function(e,t){var n=e("./is-vfocus"),o=e("../vdom/is-empty");t.exports=function(e){if(!n(e))throw new Error("Only a VFocus element should be passed to isEmptyVFocus");return o(e.vNode)}},{"../vdom/is-empty":94,"./is-vfocus":103}],101:[function(e,t){var n=e("./is-vfocus"),o=e("./is-vtext"),r=e("./is-empty.js");t.exports=function(e){if(!n(e))throw new Error("Only a valid VFocus can be passed to isNotEmpty");return o(e)&&!r(e)}},{"./is-empty.js":100,"./is-vfocus":103,"./is-vtext":104}],102:[function(e,t){var n=e("./is-vfocus.js"),o=e("../vdom/is-tag.js");t.exports=function(e){if(!n(e))throw new Error("Only a VFocus element should be passed to isEmptyVFocus");return o(e.vNode,"p")}},{"../vdom/is-tag.js":95,"./is-vfocus.js":103}],103:[function(e,t){var n=e("../../vfocus");t.exports=function(e){return e instanceof n}},{"../../vfocus":105}],104:[function(e,t){var n=e("vtree/is-vtext"),o=(e("../../vfocus"),e("../vfocus/is-vfocus"));t.exports=function(e){if(!o(e))throw new Error("Only a VFocus element should be passed to isVText");return n(e.vNode)}},{"../../vfocus":105,"../vfocus/is-vfocus":103,"vtree/is-vtext":47}],105:[function(e,t){function n(e,t){this.vNode=e,this.parent=t}t.exports=n,n.prototype.rightVNode=function(){if(this.isRoot())return null;var e=this.parent.vNode.children.indexOf(this.vNode)+1;return this.parent.vNode.children[e]},n.prototype.leftVNode=function(){if(this.isRoot())return null;var e=this.parent.vNode.children.indexOf(this.vNode)-1;return e>=0?this.parent.vNode.children[e]:null},n.prototype.isRoot=function(){return!this.parent},n.prototype.canRight=function(){return!!this.rightVNode()},n.prototype.canLeft=function(){return!!this.leftVNode()},n.prototype.canDown=function(){return this.vNode.children&&this.vNode.children.length?!0:!1},n.prototype.canUp=function(){return!this.isRoot()},n.prototype.next=function(){function e(t){return t?t.right()||e(t.up()):null}return this.down()||this.right()||e(this)},n.prototype.prev=function(){function e(t){function n(e){for(var t=e;t.canRight();)t=t.right();return t}return t.canDown()?e(t.down()):n(t)}var t;return t=this.left()&&this.left().down()?e(this.left()):this.left()?this.left():this.up()},n.prototype.down=function(){return this.canDown()?new n(this.vNode.children[0],this):null},n.prototype.up=function(){return this.canUp()?this.parent:null},n.prototype.right=function(){return this.canRight()?new n(this.rightVNode(),this.parent):null},n.prototype.left=function(){return this.canLeft()?new n(this.leftVNode(),this.parent):null},n.prototype.top=function(){return this.canUp()?this.parent.top():this},n.prototype.replace=function(e){if(this.isRoot())this.vNode=e;else{var t=this.parent.vNode.children.indexOf(this.vNode);this.parent.vNode.children.splice(t,1,e),this.vNode=e}return this},n.prototype.remove=function(){if(this.isRoot());else{var e=this.parent.vNode.children.indexOf(this.vNode);this.parent.vNode.children.splice(e,1)}return this},n.prototype.insertBefore=function(e){var e=e instanceof Array?e:[e];if(this.isRoot());else{var t=this.parent.vNode.children,n=t.indexOf(this.vNode);e.reverse().forEach(function(e){t.splice(n,0,e)})}return this},n.prototype.insertAfter=function(e){var e=e instanceof Array?e:[e];if(this.isRoot());else{var t=this.parent.vNode.children,n=t.indexOf(this.vNode);t.length===n+1?t=t.concat(e):e.reverse().forEach(function(e){t.splice(n+1,0,e)})}return this},n.prototype.refresh=function(){function e(e){return e.vNode===t.vNode}var t=this,n=this.top().find(e);return this.parent=n.parent,this},n.prototype.forEach=function(e){for(var t=this;t;)e(t),t=t.next()},n.prototype.flatten=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},n.prototype.takeWhile=function(e,t){for(var t=t||"next",n=this,o=[];n&&e(n);)o.push(n),n=n[t]();return o},n.prototype.filter=function(e,t){var t=t||"next",n=[];return this.forEach(function(t){e(t)&&n.push(t)},t),n},n.prototype.find=function(e,t){for(var t=t||"next",n=this;n&&!e(n);)n=n[t]();return n}},{}]},{},[54])(54)});//# sourceMappingURL=scribe-plugin-noting.min.js.map