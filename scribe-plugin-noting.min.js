define("lodash-amd/modern/internals/baseIndexOf",[],function(){function e(e,n,t){for(var r=(t||0)-1,i=e?e.length:0;++r<i;)if(e[r]===n)return r;return-1}return e}),define("lodash-amd/modern/internals/isNative",[],function(){function e(e){return"function"==typeof e&&r.test(e)}var n=Object.prototype,t=n.toString,r=RegExp("^"+String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("lodash-amd/modern/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("lodash-amd/modern/objects/isObject",["../internals/objectTypes"],function(e){function n(n){return!(!n||!e[typeof n])}return n}),define("lodash-amd/modern/utilities/noop",[],function(){function e(){}return e}),define("lodash-amd/modern/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,n){function t(e){return n(e)?r(e):{}}var r=e(r=Object.create)&&r;return r||(t=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var r=new e;e.prototype=null}return r||window.Object()}}()),t}),define("lodash-amd/modern/internals/setBindData",["./isNative","../utilities/noop"],function(e,n){var t={configurable:!1,enumerable:!1,value:null,writable:!1},r=function(){try{var n={},t=e(t=Object.defineProperty)&&t,r=t(n,n,n)&&t}catch(i){}return r}(),i=r?function(e,n){t.value=n,r(e,"__bindData__",t)}:n;return i}),define("lodash-amd/modern/internals/slice",[],function(){function e(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(0>i?0:i);++r<i;)o[r]=e[n+r];return o}return e}),define("lodash-amd/modern/internals/baseBind",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,n,t,r){function i(i){function o(){if(c){var t=r(c);a.apply(t,arguments)}if(this instanceof o){var i=e(u.prototype),f=u.apply(i,t||arguments);return n(f)?f:i}return u.apply(s,t||arguments)}var u=i[0],c=i[2],s=i[4];return t(o,i),o}var o=[],a=o.push;return i}),define("lodash-amd/modern/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,n,t,r){function i(o){function u(){var t=m?d:this;if(f){var o=r(f);a.apply(o,arguments)}if((l||y)&&(o||(o=r(arguments)),l&&a.apply(o,l),y&&o.length<p))return s|=16,i([c,h?s:-4&s,o,null,d,p]);if(o||(o=arguments),b&&(c=t[v]),this instanceof u){t=e(c.prototype);var g=c.apply(t,o);return n(g)?g:t}return c.apply(t,o)}var c=o[0],s=o[1],f=o[2],l=o[3],d=o[4],p=o[5],m=1&s,b=2&s,y=4&s,h=8&s,v=c;return t(u,o),u}var o=[],a=o.push;return i}),define("lodash-amd/modern/objects/isFunction",[],function(){function e(e){return"function"==typeof e}return e}),define("lodash-amd/modern/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,n,t,r){function i(o,c,s,f,l,d){var p=1&c,m=2&c,b=4&c,y=16&c,h=32&c;if(!m&&!t(o))throw new TypeError;y&&!s.length&&(c&=-17,y=s=!1),h&&!f.length&&(c&=-33,h=f=!1);var v=o&&o.__bindData__;if(v&&v!==!0)return v=r(v),v[2]&&(v[2]=r(v[2])),v[3]&&(v[3]=r(v[3])),!p||1&v[1]||(v[4]=l),!p&&1&v[1]&&(c|=8),!b||4&v[1]||(v[5]=d),y&&a.apply(v[2]||(v[2]=[]),s),h&&u.apply(v[3]||(v[3]=[]),f),v[1]|=c,i.apply(null,v);var g=1==c||17===c?e:n;return g([o,c,s,f,l,d])}var o=[],a=o.push,u=o.unshift;return i}),define("lodash-amd/modern/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,n){function t(t,r){return arguments.length>2?e(t,17,n(arguments,2),null,r):e(t,1,null,null,r)}return t}),define("lodash-amd/modern/utilities/identity",[],function(){function e(e){return e}return e}),define("lodash-amd/modern/support",["./internals/isNative"],function(e){var n=/\bthis\b/,t={};return t.funcDecomp=!e(window.WinRTError)&&n.test(function(){return this}),t.funcNames="string"==typeof Function.name,t}),define("lodash-amd/modern/internals/baseCreateCallback",["../functions/bind","../utilities/identity","./setBindData","../support"],function(e,n,t,r){function i(i,c,s){if("function"!=typeof i)return n;if("undefined"==typeof c||!("prototype"in i))return i;var f=i.__bindData__;if("undefined"==typeof f&&(r.funcNames&&(f=!i.name),f=f||!r.funcDecomp,!f)){var l=u.call(i);r.funcNames||(f=!o.test(l)),f||(f=a.test(l),t(i,f))}if(f===!1||f!==!0&&1&f[1])return i;switch(s){case 1:return function(e){return i.call(c,e)};case 2:return function(e,n){return i.call(c,e,n)};case 3:return function(e,n,t){return i.call(c,e,n,t)};case 4:return function(e,n,t,r){return i.call(c,e,n,t,r)}}return e(i,c)}var o=/^\s*function[ \n\r\t]+\w/,a=/\bthis\b/,u=Function.prototype.toString;return i}),define("lodash-amd/modern/internals/shimKeys",["./objectTypes"],function(e){var n=Object.prototype,t=n.hasOwnProperty,r=function(n){var r,i=n,o=[];if(!i)return o;if(!e[typeof n])return o;for(r in i)t.call(i,r)&&o.push(r);return o};return r}),define("lodash-amd/modern/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,n,t){var r=e(r=Object.keys)&&r,i=r?function(e){return n(e)?r(e):[]}:t;return i}),define("lodash-amd/modern/objects/forOwn",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,n,t){var r=function(r,i,o){var a,u=r,c=u;if(!u)return c;if(!t[typeof u])return c;i=i&&"undefined"==typeof o?i:e(i,o,3);for(var s=-1,f=t[typeof u]&&n(u),l=f?f.length:0;++s<l;)if(a=f[s],i(u[a],a,r)===!1)return c;return c};return r}),define("lodash-amd/modern/objects/isArray",["../internals/isNative"],function(e){var n="[object Array]",t=Object.prototype,r=t.toString,i=e(i=Array.isArray)&&i,o=i||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&r.call(e)==n||!1};return o}),define("lodash-amd/modern/objects/isString",[],function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&r.call(e)==n||!1}var n="[object String]",t=Object.prototype,r=t.toString;return e}),define("lodash-amd/modern/collections/contains",["../internals/baseIndexOf","../objects/forOwn","../objects/isArray","../objects/isString"],function(e,n,t,r){function i(i,a,u){var c=-1,s=e,f=i?i.length:0,l=!1;return u=(0>u?o(0,f+u):u)||0,t(i)?l=s(i,a,u)>-1:"number"==typeof f?l=(r(i)?i.indexOf(a,u):s(i,a,u))>-1:n(i,function(e){return++c>=u?!(l=e===a):void 0}),l}var o=Math.max;return i}),define("scribe-common/src/element",["lodash-amd/modern/collections/contains"],function(e){function n(n){return e(i,n.nodeName)}function t(e){return e.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===e.className}function r(e,n){for(;n.childNodes.length>0;)e.insertBefore(n.childNodes[0],n);e.removeChild(n)}var i=["P","LI","DIV","BLOCKQUOTE","UL","OL","H1","H2","H3","H4","H5","H6"];return{isBlockElement:n,isSelectionMarkerNode:t,unwrap:r}}),define("scribe-plugin-noting",["scribe-common/src/element"],function(e){return function(n){return function(t){function r(){var e=document.createElement(v);e.className=N;var t=(new Date).getTime().toString();return e.setAttribute("data-edited-by",n),e.setAttribute("data-edited-date",t),e}function i(e){var n=r();return e.textContent=e.textContent,n.appendChild(e),n}function o(e){var n=r(),t=e.cloneNode(!0);return n.innerHTML=t.innerHTML,t.appendChild(n),t}function a(e){var n=document.createDocumentFragment(),t=e.childNodes;return t=Array.prototype.slice.call(t),t.forEach(function(e){var t;t=e.nodeType===Node.TEXT_NODE?i(e):o(e),n.appendChild(t)}),n}function u(e){var n=e.childNodes;n=Array.prototype.slice.call(n);var t=n.filter(function(e){return-1!==j.indexOf(e.nodeName)});return t.length>0}function c(e){return s(e,"scribe-marker")}function s(e,n){return e.classList?e.classList.contains(n):!1}function f(e){return e.tagName===g}function l(e,n){for(var t=e.childNodes,r=0;r<t.length;r++)l(t[r],n);n(e)}function d(e){var n=e.firstChild,t=e.parentNode;t.replaceChild(n,e)}function p(e){for(var n=0,t=e.length;t>n;n++){{e[n]}if(c(e[n]))return n}return-1}function m(e,n){var t=!1,r=!1,i=[];return l(e,function(e){r||(c(e)&&(t===!0?r=!0:t=!0),!r&&t&&n(e)&&i.push(e))}),i}function b(e,n){e.placeMarkers(),e.selectMarkers(!0);var t=n.commonAncestorContainer,r=m(t,function(e){return!c(e)&&-1===p(e.childNodes)});r.forEach(function(e){var n,t=e.parentNode,r=e.nextSibling;n=e.nodeType===Node.TEXT_NODE?i(e):o(e),r?t.insertBefore(n,r):t.appendChild(n)}),e.selectMarkers()}function y(n,t){n.placeMarkers(),n.selectMarkers(!0);var r=t.commonAncestorContainer,i=r.parentNode;r.nextSibling?i=r.nextSibling.parentNode:r.previousSibling&&(i=r.previousSibling.parentNode),e.unwrap(i,r),n.selectMarkers()}function h(e,n){e.placeMarkers(),e.selectMarkers(!0);var t=n.commonAncestorContainer,r=m(t,function(e){return f(e)});r=Array.prototype.slice.call(r),r.forEach(function(e){d(e)}),e.selectMarkers()}var v="gu:note",g="GU:NOTE",N="note",j=["P","LI","UL"],C=new t.api.Command("insertHTML");C.execute=function(){var e=new t.api.Selection,n=e.range,r=n.cloneContents();if(!e.selection.isCollapsed)if(this.queryState())u(r)?h(e,n):y(e,n);else if(u(r))b(e,n);else{var i=a(r);n.deleteContents(),n.insertNode(i)}},C.queryState=function(){var e=new t.api.Selection,n=e.range.cloneContents().querySelectorAll(".note"),r=function(e){for(var n=0,t=e.length;t>n;n++)if(f(e[n]))return!0},i=!!e.getContaining(function(e){return f(e)});return i||r(n)},t.commands.note=C,t.el.addEventListener("keydown",function(e){if(121===e.keyCode||119===e.keyCode){e.preventDefault();var n=t.getCommand("note");n.execute()}})}}});//# sourceMappingURL=scribe-plugin-noting.min.js.map